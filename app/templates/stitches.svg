<svg style="max-height: 750px;" viewBox="0 0 {{27 + 15 + 4 + 340 * maxcols + (356-340)}} {{6 + 243 + 225 * lines|length + (247-225)}}" fill="none" xmlns="http://www.w3.org/2000/svg">
<!--rect width="{{ 340 * maxcols}}" height="{{ 225 * lines|length}}" fill="none" -->
{% for k in range(maxcols) %}
<svg x="{{18 + k * 340}}" y="0" width="350" height="243" viewBox="0 0 350 243" fill="none" >
<path d="M20.8593 241C10.8184 215 6.56305 154.379 5.4644 112.306C5.57858 91.9586 1.39087 34.6074 16.1574 18.9479C30.9239 3.28831 133.699 5.06036 175.027 5.06036V122C140.148 121 154.34 186.5 162.053 226.343L20.8593 241Z" fill="{{colour}}"/>
<path d="M329.141 241C339.182 215 343.437 154.379 344.536 112.306C344.421 91.9586 348.609 34.6074 333.843 18.9479C319.076 3.28831 216.301 5.06036 174.973 5.06036V122C209.852 121 195.66 186.5 187.947 226.343L329.141 241Z" fill="{{colour}}"/>
</svg>
{% endfor %}
{% for i in range(lines|length) %}
{% for j in range(lines[i]|length) %}
{% if lines[i][j] == 'K' %}
{% if j == 0 %}
<svg x="0" y="{{i * 225 + 219 + 99}}" width="31" height="142" viewBox="0 0 31 142" fill="none" >
<path d="M22.5001 132C-7.16346 132 9.7435 10.5 19.5002 5.5H27.0001L22.5001 132Z" fill="{{colour}}"/>
</svg>
{% endif %}
{% if j == maxcols - 1 %}
<svg x="{{18 + (j + 1)*340}}" y="{{i * 225 + 219 + 99.5}}" width="31" height="142" viewBox="0 0 31 142" fill="none" >
<g transform="rotate(180 15.5 71)">
<path d="M22.5001 132C-7.16346 132 9.7435 10.5 19.5002 5.5H27.0001L22.5001 132Z" fill="{{colour}}"/>
</g>
</svg>
{% endif %}
<svg x="{{15 + j * 340}}" y="{{6 + i * 225 + 218.5}}" width="357" height="235" viewBox="0 0 357 235" fill="none">
<path d="M8.47267 112.306C8.58888 91.9586 4.32659 34.6074 19.3561 18.9479C34.3857 3.28831 138.992 5.06036 181.056 5.06036V117.653L99.9694 113.261L8.47267 112.306Z" fill="{{colour}}"/>
<path d="M177.584 122.694C177.468 143.041 181.73 200.393 166.7 216.052C151.671 231.712 47.0649 229.94 5.00099 229.94L5.001 117.347L86.0872 121.739L177.584 122.694Z" fill="{{colour}}"/>
<path d="M347.64 112.306C347.524 91.9586 351.787 34.6074 336.757 18.9479C321.727 3.28831 217.122 5.06036 175.058 5.06036V117.653L256.144 113.261L347.64 112.306Z" fill="{{colour}}"/>
<path d="M178.529 122.694C178.645 143.041 174.383 200.393 189.413 216.052C204.442 231.712 309.048 229.94 351.112 229.94L351.112 117.347L270.026 121.739L178.529 122.694Z" fill="{{colour}}"/>
</svg>
{% else %}
{% if i == lines|length -1 %}
<svg x="{{22 + j * 340}}" y="{{i * 225 + 219 + 227.5}}" width="342" height="38" viewBox="0 0 344 38" fill="none" >
<path d="M131.184 31.8192L172 31.8192L172 17.0001C159.5 17.0001 160.5 6.00012 158.5 2.50012L15.8563 15.0001C19 35.0001 60 31.8191 72 31.8192C84.9515 31.8193 106.579 31.8192 131.184 31.8192Z" fill="{{colour}}"/>
<path d="M212.816 31.8192L172 31.8192L172 17.0001C184.5 17.0001 183.5 6.00012 185.5 2.50012L328.144 15.0001C325 35.0001 284 31.8191 272 31.8192C259.048 31.8193 237.421 31.8192 212.816 31.8192Z" fill="{{colour}}"/>
</svg>
{% endif %}
<svg x="{{15 + 4 + j * 340}}" y="{{i * 225 + 218.5}}" width="348" height="247" viewBox="0 0 348 247" fill="none" >
<path d="M20.1889 244.691C-6.80295 129.744 16.9495 36.5261 16.1416 11C23.5393 41.9244 90.0039 130.747 90.0039 130.747L126.429 176.134L162.854 238.422L20.1889 244.691Z" fill="{{colour}}"/>
<path d="M157.827 2.30873C184.819 117.256 161.066 210.474 161.874 236C154.476 205.076 88.0118 116.253 88.0118 116.253L51.5866 70.8657L15.1614 8.5782L157.827 2.30873Z" fill="{{colour}}"/>
<path d="M190.173 2.30873C163.181 117.256 186.934 210.474 186.126 236C193.524 205.076 259.988 116.253 259.988 116.253L296.413 70.8657L332.839 8.5782L190.173 2.30873Z" fill="{{colour}}"/>
<path d="M327.811 244.691C354.803 129.744 331.05 36.5261 331.858 11C324.461 41.9244 257.996 130.747 257.996 130.747L221.571 176.134L185.146 238.422L327.811 244.691Z" fill="{{colour}}"/>
</svg>
{% endif %}
{% endfor %}
{% endfor %}
{% for k in range(maxcols) %}
<svg x="{{18 + k * 340}}" y="0" width="350" height="243" viewBox="0 0 350 243" fill="none">
<path d="M18.755 233.329L4.92789 233.329V171.207L18.755 233.329Z" fill="black" fill-opacity="0.8"/>
<path d="M5.4644 112.306L0.464475 112.278L0.46403 112.357L0.466101 112.436L5.4644 112.306ZM16.1574 18.9479L19.7951 22.3781L16.1574 18.9479ZM0.466101 112.436C1.01773 133.561 2.36202 159.369 4.83523 183.196C7.29104 206.856 10.9093 229.114 16.195 242.801L25.5235 239.199C20.7684 226.886 17.2385 205.833 14.7818 182.164C12.3424 158.663 11.0097 133.124 10.4627 112.175L0.466101 112.436ZM12.5197 15.5176C7.8511 20.4685 5.11461 28.1256 3.38322 36.2362C1.61409 44.5237 0.73286 54.1099 0.32092 63.6534C-0.493654 82.5247 0.518641 102.626 0.464475 112.278L10.4643 112.334C10.5243 101.639 9.49987 82.8906 10.3116 64.0846C10.7128 54.7894 11.5605 45.8299 13.1629 38.3239C14.8029 30.6411 17.0804 25.257 19.7951 22.3781L12.5197 15.5176ZM175.027 0.0603552C154.454 0.0603552 118.257 -0.384272 85.4006 1.13713C68.9788 1.89754 53.2295 3.15494 40.5859 5.23808C34.2702 6.27864 28.5912 7.54697 23.9319 9.11685C19.4206 10.6369 15.232 12.6412 12.5197 15.5176L19.7951 22.3781C20.7744 21.3396 23.0278 19.9738 27.1248 18.5934C31.0739 17.2629 36.1698 16.1005 42.2116 15.1051C54.2829 13.1162 69.5792 11.8805 85.8631 11.1264C118.418 9.61896 154.272 10.0604 175.027 10.0604V0.0603552ZM166.962 225.393C163.065 205.262 157.716 179.475 157.568 158.82C157.494 148.435 158.759 140.104 161.634 134.591C163.026 131.922 164.724 130.05 166.725 128.842C168.713 127.641 171.327 126.896 174.884 126.998L175.171 117.002C170.008 116.854 165.435 117.938 161.554 120.283C157.685 122.62 154.83 126.013 152.768 129.967C148.735 137.698 147.491 148.045 147.568 158.891C147.725 180.697 153.328 207.581 157.144 227.293L166.962 225.393Z" fill="black"/>
<path d="M331.245 233.329L345.072 233.329V171.207L331.245 233.329Z" fill="black" fill-opacity="0.8"/>
<path d="M344.536 112.306L349.536 112.278L349.536 112.357L349.534 112.436L344.536 112.306ZM333.843 18.9479L330.205 22.3781L333.843 18.9479ZM349.534 112.436C348.982 133.561 347.638 159.369 345.165 183.196C342.709 206.856 339.091 229.114 333.805 242.801L324.476 239.199C329.232 226.886 332.761 205.833 335.218 182.164C337.658 158.663 338.99 133.124 339.537 112.175L349.534 112.436ZM337.48 15.5176C342.149 20.4685 344.885 28.1256 346.617 36.2362C348.386 44.5237 349.267 54.1099 349.679 63.6534C350.494 82.5247 349.481 102.626 349.536 112.278L339.536 112.334C339.476 101.639 340.5 82.8906 339.688 64.0846C339.287 54.7894 338.439 45.8299 336.837 38.3239C335.197 30.6411 332.92 25.257 330.205 22.3781L337.48 15.5176ZM174.973 0.0603552C195.546 0.0603552 231.743 -0.384272 264.599 1.13713C281.021 1.89754 296.771 3.15494 309.414 5.23808C315.73 6.27864 321.409 7.54697 326.068 9.11685C330.579 10.6369 334.768 12.6412 337.48 15.5176L330.205 22.3781C329.226 21.3396 326.972 19.9738 322.875 18.5934C318.926 17.2629 313.83 16.1005 307.788 15.1051C295.717 13.1162 280.421 11.8805 264.137 11.1264C231.582 9.61896 195.728 10.0604 174.973 10.0604V0.0603552ZM183.038 225.393C186.935 205.262 192.284 179.475 192.432 158.82C192.506 148.435 191.241 140.104 188.366 134.591C186.974 131.922 185.276 130.05 183.275 128.842C181.287 127.641 178.673 126.896 175.116 126.998L174.829 117.002C179.992 116.854 184.565 117.938 188.446 120.283C192.315 122.62 195.17 126.013 197.232 129.967C201.265 137.698 202.509 148.045 202.432 158.891C202.275 180.697 196.672 207.581 192.856 227.293L183.038 225.393Z" fill="black"/>
</svg>
{% endfor %}
{% for i in range(lines|length) %}
{% for j in range(lines[i]|length) %}
{% if lines[i][j] == 'K' %}
{% if j == 0 %}
<svg x="0" y="{{i * 225 + 219 + 99}}" width="31" height="142" viewBox="0 0 31 142" fill="none" >
<path d="M21.5001 137C-8.16352 137 9.74343 10.5 19.5001 5.5H27" stroke="black" stroke-width="10" stroke-linejoin="round"/>
</svg>
{% endif %}
{% if j == maxcols - 1 %}
<svg x="{{18 + (j + 1)*340}}" y="{{i * 225 + 219 + 99.5}}" width="31" height="142" viewBox="0 0 31 142" fill="none" >
<g transform="rotate(180 15.5 71)">
<path d="M21.5001 137C-8.16352 137 9.74343 10.5 19.5001 5.5H27" stroke="black" stroke-width="10" stroke-linejoin="round"/>
</g>
</svg>
{% endif %}
<svg x="{{15 + j * 340}}" y="{{6 + i * 225 + 218.5}}" width="357" height="235" viewBox="0 0 357 235" fill="none">
<path d="M181.056 5.06036C138.992 5.06036 34.3857 3.28831 19.3561 18.9479C4.32659 34.6074 8.58888 91.9586 8.47267 112.306L95.071 117.653" stroke="black" stroke-width="10" stroke-linecap="square" stroke-linejoin="round"/>
<path d="M8 9V34.5L33 9H8Z" fill="black" fill-opacity="0.8"/>
<path d="M11.5 108.5L153 123.5C113.5 114.5 31.2896 111.626 11.5 79.9999L11.5 108.5Z" fill="black" fill-opacity="0.4"/>
<path d="M5.00099 229.94C47.0649 229.94 151.671 231.712 166.7 216.052C181.73 200.393 177.468 143.041 177.584 122.694L90.9856 117.347" stroke="black" stroke-width="10" stroke-linecap="square" stroke-linejoin="round"/>
<path d="M178.057 226L178.057 200.5L153.057 226L178.057 226Z" fill="black" fill-opacity="0.8"/>
<path d="M174.557 126.5L33.0566 111.5C72.5566 120.5 154.767 123.374 174.557 155L174.557 126.5Z" fill="black" fill-opacity="0.4"/>
<path d="M175.058 5.06036C217.122 5.06036 321.727 3.28831 336.757 18.9479C351.787 34.6074 347.524 91.9586 347.64 112.306L261.042 117.653" stroke="black" stroke-width="10" stroke-linecap="square" stroke-linejoin="round"/>
<path d="M348.113 9V34.5L323.113 9H348.113Z" fill="black" fill-opacity="0.8"/>
<path d="M344.613 108.5L203.113 123.5C242.613 114.5 324.824 111.626 344.613 79.9999L344.613 108.5Z" fill="black" fill-opacity="0.4"/>
<path d="M351.112 229.94C309.048 229.94 204.442 231.712 189.413 216.052C174.383 200.393 178.645 143.041 178.529 122.694L265.128 117.347" stroke="black" stroke-width="10" stroke-linecap="square" stroke-linejoin="round"/>
<path d="M178.057 226L178.057 200.5L203.057 226L178.057 226Z" fill="black" fill-opacity="0.8"/>
<path d="M181.557 126.5L323.057 111.5C283.557 120.5 201.346 123.374 181.557 155L181.557 126.5Z" fill="black" fill-opacity="0.4"/>
</svg>
{% else %}
{% if i == lines|length -1 %}
<svg x="{{22 + j * 340}}" y="{{i * 225 + 219 + 227.5}}" width="342" height="38" viewBox="0 0 344 38" fill="none" >
<path d="M0.939208 11.8C0.939208 25.2441 12.6256 28.2765 26.4887 32.519L10.9133 15.7979L10.2021 11.8L0.939208 11.8Z" fill="black" fill-opacity="0.8"/>
<path d="M72 31.8192L72.0001 26.8192L72 31.8192ZM172 36.8192C131.964 36.8192 91.8214 36.8193 72 36.8192L72.0001 26.8192C91.8214 26.8193 131.964 26.8192 172 26.8192L172 36.8192ZM162.841 0.0194238C163.774 1.65144 164.259 3.88577 164.545 5.02377C164.928 6.55085 165.277 7.79023 165.802 8.86182C166.294 9.86495 166.861 10.5459 167.595 11.0164C168.328 11.4856 169.625 12.0001 172 12.0001L172 22.0001C168.125 22.0001 164.86 21.1396 162.202 19.437C159.545 17.7355 157.894 15.4478 156.823 13.2634C155.786 11.1475 155.228 8.98062 154.846 7.46083C154.637 6.62809 154.498 6.05502 154.348 5.54925C154.194 5.02873 154.12 4.91305 154.159 4.98082L162.841 0.0194238ZM72 36.8192C66.4319 36.8191 52.5157 37.6305 39.9119 35.8611C33.5836 34.9726 27.0796 33.3818 21.8177 30.4243C16.4354 27.3991 12.0073 22.713 10.9169 15.7765L20.7956 14.2237C21.2772 17.2872 23.153 19.7035 26.7174 21.7069C30.402 23.7779 35.4876 25.1418 41.3022 25.9582C52.9843 27.5982 65.5681 26.8191 72.0001 26.8192L72 36.8192Z" fill="black"/>
<path d="M343.061 11.8C343.061 25.2441 331.374 28.2765 317.511 32.519L333.087 15.7979L333.798 11.8L343.061 11.8Z" fill="black" fill-opacity="0.8"/>
<path d="M272 31.8192L272 26.8192L272 31.8192ZM172 36.8192C212.036 36.8192 252.179 36.8193 272 36.8192L272 26.8192C252.179 26.8193 212.036 26.8192 172 26.8192L172 36.8192ZM181.159 0.0194238C180.226 1.65144 179.741 3.88577 179.455 5.02377C179.072 6.55085 178.723 7.79023 178.198 8.86182C177.706 9.86495 177.139 10.5459 176.405 11.0164C175.672 11.4856 174.375 12.0001 172 12.0001L172 22.0001C175.875 22.0001 179.14 21.1396 181.798 19.437C184.455 17.7355 186.106 15.4478 187.177 13.2634C188.214 11.1475 188.772 8.98062 189.154 7.46083C189.363 6.62809 189.502 6.05502 189.652 5.54925C189.806 5.02873 189.88 4.91305 189.841 4.98082L181.159 0.0194238ZM272 36.8192C277.568 36.8191 291.484 37.6305 304.088 35.8611C310.416 34.9726 316.92 33.3818 322.182 30.4243C327.565 27.3991 331.993 22.713 333.083 15.7765L323.204 14.2237C322.723 17.2872 320.847 19.7035 317.283 21.7069C313.598 23.7779 308.512 25.1418 302.698 25.9582C291.016 27.5982 278.432 26.8191 272 26.8192L272 36.8192Z" fill="black"/>
</svg>
{% endif %}
<svg x="{{15 + 4 + j * 340}}" y="{{i * 225 + 218.5}}" width="348" height="247" viewBox="0 0 348 247" fill="none" >
<path d="M18.1654 245.657C-8.82645 130.71 16.9496 36.5261 16.1417 11C23.5394 41.9244 63.4944 93.8886 89.0236 123.504" stroke="black" stroke-width="10"/>
<path d="M4 239.87L17.6595 239.87L4 180.963L4 239.87Z" fill="black" fill-opacity="0.8"/>
<path d="M4 14.8628L17.6595 14.8628L4 73.7703L4 14.8628Z" fill="black" fill-opacity="0.8"/>
<path d="M19.1772 25.0026L10.5768 61.6991L87.9803 124.469L19.1772 25.0026Z" fill="black" fill-opacity="0.2"/>
<path d="M159.85 1.34305C186.842 116.29 161.066 210.474 161.874 236C154.476 205.076 114.521 153.111 88.9922 123.496" stroke="black" stroke-width="10"/>
<path d="M174.016 7.12967L160.356 7.12967L174.016 66.0372L174.016 7.12967Z" fill="black" fill-opacity="0.8"/>
<path d="M174.016 232.137L160.356 232.137L174.016 173.23L174.016 232.137Z" fill="black" fill-opacity="0.8"/>
<path d="M158.839 221.997L167.439 185.301L90.0354 122.531L158.839 221.997Z" fill="black" fill-opacity="0.2"/>
<path d="M188.15 1.34305C161.158 116.29 186.934 210.474 186.126 236C193.524 205.076 233.479 153.111 259.008 123.496" stroke="black" stroke-width="10"/>
<path d="M173.984 7.12967L187.644 7.12967L173.984 66.0372L173.984 7.12967Z" fill="black" fill-opacity="0.8"/>
<path d="M173.984 232.137L187.644 232.137L173.984 173.23L173.984 232.137Z" fill="black" fill-opacity="0.8"/>
<path d="M189.161 221.997L180.561 185.301L257.965 122.531L189.161 221.997Z" fill="black" fill-opacity="0.2"/>
<path d="M329.835 245.657C356.826 130.71 331.05 36.5261 331.858 11C324.461 41.9244 284.506 93.8886 258.976 123.504" stroke="black" stroke-width="10"/>
<path d="M344 239.87L330.341 239.87L344 180.963L344 239.87Z" fill="black" fill-opacity="0.8"/>
<path d="M344 14.8628L330.341 14.8628L344 73.7703L344 14.8628Z" fill="black" fill-opacity="0.8"/>
<path d="M328.823 25.0026L337.423 61.6991L260.02 124.469L328.823 25.0026Z" fill="black" fill-opacity="0.2"/>
</svg>
{% endif %}
{% endfor %}
{% endfor %}
</svg>
<input type="hidden" id="rendered" value="{{stitch_string}}">
